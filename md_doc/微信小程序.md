[TOC]

# 小程序开发准备工作[¶](#_1)

- [稳定版开发包下载](https://developers.weixin.qq.com/miniprogram/dev/devtools/download.html)
- 小程序账号注册绑定
- flex布局基础知识
- 移动端视口相关理论

# 小程序语法概述[¶](#_2)

- 没有dom
- 组件化开发
- 体积小，单个压缩包体积不能大于2M，否则无法上线
- 4个重要文件

```
1.*.js

2.*.wxml--->view结构--->html

3.*.wxss--->view样式--->css

4.*.json--->view数据--->json文件
```

- 小程序适配方案：rpx(respinsive pixel 响应式像素单位)

```
1.小程序适配单位：rpx
2.规定任何屏幕下宽度为750rpx
3.小程序会根据屏幕的宽度不同自动计算rpx值的大小
4.Iphone6下：1rpx = 1物理像素 = 0.5px
```

# 小程序开发工具使用介绍[¶](#_3)

AppID：在注册小程序账号后，会有ID

后端服务：

```
小程序`云开发
不使用云服务
```

这里勾选`不使用云服务`

# 初始化项目文件说明[¶](#_4)

- project.config.json（项目的配置文件）
- [sitemap.json](https://developers.weixin.qq.com/miniprogram/dev/reference/configuration/sitemap.html)

```
来配置其小程序页面是否允许微信索引
```

- app.js

```
必须要有一个app.js，文件内容必须要有App({})的调用
```

[参考网址](https://developers.weixin.qq.com/miniprogram/dev/reference/api/App.html) - app.json

```
必须要有一个app.json
```

[参考网址](https://developers.weixin.qq.com/miniprogram/dev/reference/configuration/app.html)

```
{
  "pages": [
    "pages/index/index",
    "pages/logs/logs"
  ],
  "window": {
    "navigationBarBackgroundColor": "#ffffff",
    "navigationBarTextStyle": "black",
    "navigationBarTitleText": "小程序",
    "backgroundColor": "#eeeeee",
    "backgroundTextStyle": "light",
    "enablePullDownRefresh": false
  },
  "style": "v2",
  "sitemapLocation": "sitemap.json"
}
```

- app.wxss

```
放置公共样式
```

pages/index/

# 小程序-index页静态搭建[¶](#-index)

pages/index/index.html

```
<view class="indexContainer">
  <image class="avatarUrl" src="/static/images/logo.png" alt=""></image>
  <text class="userName">菜菜</text>
  <view class="goStudy">
    <text>点击进入</text>
  </view>
</view>
```

pages/index/index.wxss

```
/* pages/index/index.wxss */
page {
    height: 100%;
}

.indexContainer {
    display: flex;
    flex-direction: column;
    align-items: center;
    background-color: #E9E9E9;
    height: 100%;
}

.avatarUrl {
    width: 200rpx;
    height: 200rpx;
    border-radius: 50%;
    margin: 100rpx 0;
}

.userName{
    font-size: 32rpx;
    margin: 100rpx 0;
}

.goStudy {
    width: 300rpx;
    height: 80rpx;
    line-height: 80rpx;
    text-align: center;
    font-size: 28rpx;
    border: 1rpx solid grey;
    border-radius: 10rpx;
}
```

# 小程序-数据绑定[¶](#-)

## 初始化数据[¶](#_5)

.js的data选项中 index.js

```
// pages/index/index.js
Page({

  /**
   * 页面的初始数据
   */
  data: {
    msg: '菜菜'
  },

  /**
   * 生命周期函数--监听页面加载
   */
  onLoad: function (options) {
    console.log('onLoad')
    //修改msg的状态数据，syntax: this.setData
    //this表示当前页面的实例对象
    console.log(this)
    console.log(this.data.msg)

    setTimeout(() => {
        this.setData({
            msg: '修改之后的数据'
        })
        console.log(this.data.msg)
    },2000)
  },

  /**
   * 生命周期函数--监听页面初次渲染完成
   */
  onReady: function () {

  },

  /**
   * 生命周期函数--监听页面显示
   */
  onShow: function () {

  },

  /**
   * 生命周期函数--监听页面隐藏
   */
  onHide: function () {

  },

  /**
   * 生命周期函数--监听页面卸载
   */
  onUnload: function () {

  },

  /**
   * 页面相关事件处理函数--监听用户下拉动作
   */
  onPullDownRefresh: function () {

  },

  /**
   * 页面上拉触底事件的处理函数
   */
  onReachBottom: function () {

  },

  /**
   * 用户点击右上角分享
   */
  onShareAppMessage: function () {

  }
})
```

## 使用数据[¶](#_6)

1.模板结构中使用双大括号{{message}} 2.注意事项：小程序中为单项数据流 model ---> view

```
<view>{{message}}</view>
```

## 小结[¶](#_7)

1.小程序

- data中初始化数据
- 修改数据：this.setData()，修改数据的行为始终是同步的

2.Vue

- data中初始化数据
- 修改数据：this.key = value
- 数据流：

```
1.vue是单向数据流：Model-->View
2.vue中实现了双向数据绑定:v-model
```

3.React

- state中初始化数据状态
- 修改数据：this.setState()

```
1.自身钩子函数中(componentDidMount)是异步的
2.非自身钩子函数中(定时器的回调)是同步的
```

- 数据流：

```
1.单向：Model-->View
```

# 数据劫持代理[¶](#_8)

```
//vue数据劫持代理

//模拟vue中的data选项
let data  = {
    username : 'aa',
    age: 33
}

//模拟组件的实例
let _this = {

}

//利用Object.defineProperty()

for(let item in data) {
    Object.defineProperty(_this, item, {
        //get: 用来获取扩展属性值的，当获取该属性值的时候调用get方法
        get() {
            console.log('get()')
            return data[item]
        },
        //set: 监视扩展属性的，只要已修改就调用
        set(newValue) {
            console.log('set()', newValue)
            // _this.username = newValue  //千万不要在set方法中，修改当前扩展属性的值，会出现循环
            data[item] = newValue
        }
    })
}

console.log(_this)
_this.username = 'bbb'
console.log(_this.username)//aa，通过Object.defineProperty()方法添加的扩展属性不能直接用 对象.属性 修改
```